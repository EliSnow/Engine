<!DOCTYPE html>
<html data-css3testmatches="39"><head>
		<meta charset="UTF-8">
		<title>Engine tests</title>
		<style>
			td {
				text-align: center;
				padding: 0.2em;
				border: 1px solid #000;
			}
			body > * {
				display: none;
			}
			body > .results {
				display: inline-block;
			}
			h2 {
				text-align: center;
			}
			.pass {
				background-color: green;
			}
			.fail {
				background-color: red;
			}
		</style>
		<script src="../engine.js" type="text/javascript"></script>
		<script>
			var css3TestArray =	{
					0 : "body :empty",
					1 : "body :last-child",
					2 : "body :first-of-type",
					3 : "body :last-of-type",
					4 : "body :only-child",
					5 : "body :only-of-type",
					6 : "body :checked",
					7 : "body :enabled",
					8 :"body :disabled",
					9 : "td:not(colspan)",
					10 : "body :nth-child(even)",
					11 : "body :nth-child(odd)",
					12 : "body :nth-child(2)",
					13 : "body :nth-child(-3n+5)",
					14 : "body :nth-child(2n+3)",
					15 : "body :nth-child(n)",
					16 : "body :nth-child(2n-2)",
					17 : "body :nth-last-child(even)",
					18 : "body :nth-last-child(odd)",
					19 : "body :nth-last-child(2)",
					20 : "body :nth-last-child(-3n+5)",
					21 : "body :nth-last-child(2n+3)",
					22 : "body :nth-last-child(n)",
					23 : "body :nth-last-child(2n-2)",
					24 : "body :nth-of-type(even)",
					25 : "body :nth-of-type(odd)",
					26 : "body :nth-of-type(2)",
					27 : "body :nth-of-type(-3n+5)",
					28 : "body :nth-of-type(2n+3)",
					29 : "body :nth-of-type(n)",
					30 : "body :nth-of-type(2n-2)",
					31 : "body :nth-last-of-type(even)",
					32 : "body :nth-last-of-type(odd)",
					33 : "body :nth-last-of-type(2)",
					34 : "body :nth-last-of-type(-3n+5)",
					35 : "body :nth-last-of-type(2n+3)",
					36 : "body :nth-last-of-type(n)",
					37 : "body :nth-last-of-type(2n-2)",
					38 : ":target",
					39 : ":root"
				};
			function rebuildCSS3TestHTML() {
				var n, n2,
					els = document.getElementsByTagName("*"),
					i = 0,
					tables = document.querySelectorAll("table.results"),
					i2 = tables.length;
				while(i2--) {
					tables[i2].parentNode.removeChild(tables[i2]);
				}
				n = els.length;
				while (n--) {
					els[n].removeAttribute("data-css3testmatches");
				}
				n = css3TestArray.length;
				for (; i < n; i++) {
					els = document.querySelectorAll(css3TestArray[i]);
					n2 = els.length;
					while (n2--) {
						if (els[n2].getAttribute("data-css3testmatches")) {
							els[n2].setAttribute("data-css3testmatches", els[n2].getAttribute("data-css3testmatches") + " " + i);
						} else {
							els[n2].setAttribute("data-css3testmatches", i);
						}
					}
				}
			}
			function compareArrays(a, b) {
				var n = a.length;
				if (n == b.length) {
					while (n--) {
						if (a[n] !== b[n]) {
							return false;
						}
					}
					return true;
				}
				return false;
			}
			function css3Tests() {
				location.hash = "#footer";
				var	i = 0,
					n = css3TestArray.length,
					table = "<div class=\"results\"><h2>CSS3 Tests</h2><table><tbody>";
				for ( i in css3TestArray ) {
					if (css3TestArray.hasOwnProperty(i)) {
						table += "<tr><td class=\"" + (compareArrays(engine(css3TestArray[i]), document.querySelectorAll("[data-CSS3TestMatches~='" + i + "']")) ? "pass" : "fail") + "\">engine(\"" + css3TestArray[i] + "\")</td></tr>";
					}
				}
				return table + "</tbody></table></div>";
			}

			function css4Tests() {
				var tests, l,
					i = 0,
					pathParts = location.pathname.split("/"),
					table = "<div class=\"results\"><h2>CSS4/Custom Tests</h2><table><tbody>";
				document.getElementById("currentDoc").href = location.href;
				document.getElementById("onePathPart").pathname = pathParts.slice(0, 2).join("/");
				document.getElementById("twoPathPart").pathname = pathParts.slice(0, 3).join("/");	
				tests =	{
						0 : "engine(\"[class=sOmEtHiNg i]\")",
						1 : "engine(\"[class='something' i]\")",
						2 : "engine(\"[class='^some\\\\w{5}$' r]\")",
						3 : "engine(\"[class={0}]\", [/^some\\w{5}$/])",
						4 : "engine(\"[class={someReg}]\", {someReg : /^some\\w{5}$/})",
						5 : "engine(\"[class='^some\\\\w{5}$' ri]\")",
						6 : "engine(\"[.className=stuff]\")",
						7 : "engine(\".stuff > [class!=sOmEtHiNg i]\")",
						8 : "engine(\".stuff > [class!='something' i]\")",
						9 : "engine(\".stuff > [class!='^some\\\\w{5}$' r]\")",
						10 : "engine(\".stuff > [class!='^some\\\\w{5}$' ri]\")",
						11 : "engine(\".stuff > [class!=something]\")",
						12 : "engine(\".stuff > [class!='something']\")",
						13 : "engine(\"[class~=FoO i]\")",
						14 : "engine(\"[class^=bAr i]\")",
						15 : "engine(\"[class$=bAr i]\")",
						16 : "engine(\"[class*=THING i]\")",
						17 : "engine(\"[lang|=fR i]\")",
						18 : "engine(\"body :has(a)\")",
						19 : "engine(\":has(>a)\")",
						20 : "engine(\":has(~a)\")",
						21 : "engine(\":has(+a)\")",
						22 : "engine(\"body :contains(text)\")",
						23 : "engine(\"body :contains('text')\")",
						24 : "engine(\"body :contains('(t)e.\\\\1' r)\")",
						25 : "engine(\"body :contains('TEXT' i)\")",
						26 : "engine(\"body :contains('tEx.' ri)\")",
						27 : "engine(\"body :contains({0})\", [/(t)Ex\\1/i])",
						28 : "engine(\"body :contains({0})\", [\"text\"])",
						29 : "engine(\":local-link\")",
						30 : "engine(\":local-link(0)\")",
						31 : "engine(\":local-link(1)\")",
						32 : "engine(\":local-link(2)\")",
						33 : "engine(\":any-link\")",
						34 : "engine(\".something > :not([lang],[href])\")",
						35 : "engine(\"p:not(:contains(text i))\")",
						36 : "engine(\":referenced-by(data-sibling in div)\")",
						37 : "engine(\":matches(div)\")",
						46 : "engine(\":nth-match(even of p)\")",
						47 : "engine(\":nth-match(odd of p)\")",
						48 : "engine(\":nth-match(2n+3 of p)\")",
						49 : "engine(\":nth-match(n of p)\")",
						50 : "engine(\":nth-match(2n-2 of p)\")",
						51 : "engine(\":nth-last-match(even of p)\")",
						52 : "engine(\":nth-last-match(odd of p)\")",
						53 : "engine(\":nth-last-match(2n+3 of p)\")",
						54 : "engine(\":nth-last-match(2n-2 of p)\")",
						55 : "engine(\":{0}\", [function (el) {return el.id;}])",
						56 : "engine(\":{hasId}\", {hasId :function (el) {return el.id;}})",
						57 : "engine(\":nth-match(1 of --:scope > *)\", document.body)",
						58 : "engine(\"[.href]\")"
					};
					l = tests.length;
				for ( i in tests ) {
					if (tests.hasOwnProperty(i)) {
						table += "<tr><td class=\"" 
									+ (compareArrays(eval(tests[i]), document.querySelectorAll("[data-css4testmatches~='" + i + "']")) ? "pass" : "fail") 
									+ "\">" 
									+ tests[i]
									+ "</td></tr>";
					}
				}
				return table + "</tbody></table></div>";
			}
			window.onload = function () {
				document.body.innerHTML += css3Tests() + css4Tests();
			};
		</script>
	</head>
	<body>
		<!-- Altering the HTML below may break the tests -->
		<table data-css3testmatches="2 3 5 11 15 18 20 21 22 25 29 32 36" data-css4testmatches="57">
			<tbody data-css3testmatches="1 2 3 4 5 11 15 18 22 25 29 32 36">
				<tr data-css3testmatches="2 11 15 18 20 21 22 25 29 32 34 35 36">
					<td data-css3testmatches="2 9 11 15 18 21 22 25 29 32 35 36" data-css4testmatches="39 43 44">Table Cell</td>
					<td data-css3testmatches="9 10 12 13 15 16 17 19 20 22 23 24 26 27 29 30 31 33 34 36 37" data-css4testmatches="38 41 42 45">Table Cell</td>
					<td data-css3testmatches="1 3 9 11 14 15 18 22 25 28 29 32 36" data-css4testmatches="39 40 43">Table Cell</td>
				</tr>
				<tr data-css3testmatches="10 12 13 15 16 17 22 23 24 26 27 29 30 31 36 37">
					<td data-css3testmatches="2 9 11 15 17 19 20 22 23 25 29 31 33 34 36 37" colspan="2" data-css4testmatches="38 39 41 42 43 44 45">Table Cell</td>
					<td data-css3testmatches="1 3 9 10 12 13 15 16 18 22 24 26 27 29 30 32 36" data-css4testmatches="39 40 43">Table Cell</td>
				</tr>
				<tr data-css3testmatches="11 14 15 18 21 22 25 28 29 32 35 36">
					<td data-css3testmatches="2 9 11 15 18 21 22 25 29 32 35 36" data-css4testmatches="39 43 44">Table Cell</td>
					<td data-css3testmatches="9 10 12 13 15 16 17 19 20 22 23 24 26 27 29 30 31 33 34 36 37" data-css4testmatches="38 41 42 45">Table Cell</td>
					<td data-css3testmatches="1 3 9 11 14 15 18 22 25 28 29 32 36" data-css4testmatches="39 40 43">Table Cell</td>
				</tr>
				<tr data-css3testmatches="10 15 16 17 19 20 22 23 24 29 30 31 33 34 36 37">
					<td data-css3testmatches="1 2 3 4 5 9 11 15 18 22 25 29 32 36" colspan="3" data-css4testmatches="38 39 40 41 42 43 44 45">Table Cell</td>
				</tr>
				<tr data-css3testmatches="1 3 11 13 14 15 18 22 25 27 28 29 32 36">
					<td data-css3testmatches="2 9 11 15 18 21 22 25 29 32 35 36" data-css4testmatches="39 43 44">Table Cell</td>
					<td data-css3testmatches="9 10 12 13 15 16 17 19 20 22 23 24 26 27 29 30 31 33 34 36 37" data-css4testmatches="38 41 42 45">Table Cell</td>
					<td data-css3testmatches="1 3 9 11 14 15 18 22 25 28 29 32 36" data-css4testmatches="39 40 43">Table Cell</td>
				</tr>
			</tbody>
		</table>
		<div data-css3testmatches="2 10 12 13 15 16 17 22 23 25 29 31 33 34 36 37" data-sibling="footer" data-css4testmatches="18 22 23 24 25 26 27 28 37">
			<div data-css3testmatches="1 2 3 4 5 11 15 18 22 25 29 32 36" class="stuff" data-css4testmatches="6 18 22 23 24 25 26 27 28 37">
				<p data-css3testmatches="2 11 15 17 22 23 25 29 31 36 37" class="something" data-css4testmatches="0 1 2 3 4 5 16 18 19 22 23 24 25 26 27 28 47 49 52 53">
					<span data-css3testmatches="2 11 15 18 21 22 25 29 31 36 37" data-css4testmatches="20 21 34">No lang</span>
					<a data-css3testmatches="2 10 12 13 15 16 17 22 23 25 29 32 35 36" id="currentDoc" data-css4testmatches="20 21 29 30 31 32 55 56 58">link1</a>
					<a data-css3testmatches="11 14 15 18 21 22 24 26 27 29 30 31 36 37" href="." id="twoPathPart" data-css4testmatches="20 21 30 31 32 55 56 58">link2</a>
					<a data-css3testmatches="10 15 16 17 22 23 25 28 29 32 34 35 36" href="." id="onePathPart" data-css4testmatches="20 30 31 55 56 58">link3</a>
					<span data-css3testmatches="11 13 14 15 18 21 22 24 26 27 29 30 32 35 36" data-css4testmatches="20 21 22 23 24 25 26 27 28" lang="en-US">Here is some text within a span</span>
					<a data-css3testmatches="10 15 16 17 22 23 24 29 30 31 36 37" href="." data-css4testmatches="20 21 30 31 32 58">link4</a>
					<a data-css3testmatches="11 14 15 18 20 21 22 25 27 28 29 32 35 36" href="https://foo.bar" data-css4testmatches="20 21 58">link5</a>
					<a data-css3testmatches="10 15 16 17 22 23 24 29 30 31 33 34 36 37" href="http://dev.w3.org/csswg/selectors4/" data-css4testmatches="20 21 58">link6</a>
					<a data-css3testmatches="3 11 14 15 18 21 22 25 28 29 32 36" href="#footer" data-css4testmatches="29 30 31 32 58">link7</a>	
					<!-- Translations by Google -->
					<span data-css3testmatches="10 15 16 17 19 20 22 23 25 28 29 31 33 34 36 37" data-css4testmatches="17 22 23 24 25 26 27 28" lang="fr-CA">Voici un peu de texte dans un span</span>
					<span data-css3testmatches="1 3 11 14 15 18 22 24 29 30 32 36" data-css4testmatches="22 23 24 25 26 27 28" lang="es-MX">Aqu? hay un poco de texto dentro de un span</span>
				</p>
				<p data-css3testmatches="10 12 13 15 16 18 21 22 24 26 27 29 30 32 35 36" data-css4testmatches="7 8 9 10 11 12 35 46 49 50 51 54">Paragraph</p>
				<p data-css3testmatches="11 14 15 17 19 20 22 23 25 28 29 31 33 34 36 37" data-css4testmatches="7 8 9 10 11 12 35 47 48 49 52 53">Paragraph</p>
				<p data-css3testmatches="1 3 10 15 16 18 22 24 29 30 32 36" class="something" data-css4testmatches="0 1 2 3 4 5 16 35 46 49 50 51 54">Paragraph</p>
			</div>
		</div>
		<br data-css3testmatches="0 2 3 5 11 14 15 18 21 22 25 29 32 36">
		<form data-css3testmatches="2 3 5 10 15 16 17 19 20 22 23 25 29 32 36">
			<input data-css3testmatches="0 2 7 11 15 17 22 23 25 29 32 34 35 36" value="enabled" type="text">
			<input data-css3testmatches="0 8 10 12 13 15 16 18 20 21 22 24 26 27 29 30 31 36 37" disabled="" value="disabled" type="text">
			<input data-css3testmatches="0 7 11 14 15 17 22 23 25 28 29 32 35 36" readonly="" value="read-only" type="text">
			<input data-css3testmatches="0 7 10 15 16 18 21 22 24 29 30 31 33 34 36 37" type="checkbox">
			<input data-css3testmatches="0 3 6 7 11 13 14 15 17 19 20 22 23 25 27 28 29 32 36" checked="" type="checkbox">
			<select data-css3testmatches="1 2 3 5 7 10 15 16 18 22 25 29 32 36">
				<option data-css3testmatches="2 6 7 11 15 18 21 22 25 29 32 35 36">1</option>
				<option data-css3testmatches="8 10 12 13 15 16 17 19 20 22 23 24 26 27 29 30 31 33 34 36 37" disabled="">2</option>
				<option data-css3testmatches="1 3 7 11 14 15 18 22 25 28 29 32 36">3</option>
			</select>
		</form>
		<div data-css3testmatches="1 3 11 13 14 15 18 22 24 26 27 29 30 32 36 38" id="footer" data-css4testmatches="25 26 27 33 36 37 55 56">
			<p data-css3testmatches="2 11 15 18 21 22 25 29 32 35 36" data-css4testmatches="25 26 27 47 48 49 52 53">
				<span data-css3testmatches="1 2 3 4 5 11 15 18 22 25 29 32 36" class="foo bar" data-css4testmatches="13 15 25 26 27">Text in the footer</span>
			</p>
			<p data-css3testmatches="10 12 13 15 16 17 19 20 22 23 24 26 27 29 30 31 33 34 36 37" data-css4testmatches="25 26 27 46 49 50 51 54">
				<span data-css3testmatches="1 2 3 4 5 11 15 18 22 25 29 32 36" class="bar foo" data-css4testmatches="13 14 25 26 27">Text in the footer</span>
			</p>
			<p data-css3testmatches="1 3 11 14 15 18 22 25 28 29 32 36" data-css4testmatches="25 26 27 47 48 49 52">
				<span data-css3testmatches="1 2 3 4 5 11 15 18 22 25 29 32 36" data-css4testmatches="25 26 27">Text in the footer</span>
			</p>
		</div>
	
</body></html>